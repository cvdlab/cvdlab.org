<link rel="import" href="../bower_components/polymer/polymer.html">

<polymer-element name="polymer-form"  attributes="">
  <template>
    <link rel="stylesheet" href="../styles/bootstrap.min.css">
    <style>
      :host { 
        display: block;
      }

      /* 
      style if an ancestor has the different class
      :host(.different) { } 
      */
    </style>
    <template bind="{{ alumnus }}">
      <div class="container">
        <form role="form">
          <div class="form-group">
            <label for="full_name">Name Surname</label>
            <input type="text" class="form-control input-lg" id="full_name" placeholder="Enter your name and surname" value="{{ full_name }}">
          </div>
          <div class="form-group">
            <label for="email">Email</label>
            <input type="email" class="form-control input-lg" id="email" placeholder="Enter your email address" value="{{ email }}" value="{{ email }}">
          </div>
          <div class="form-group">
            <label for="website">Personal website address [optional]</label>
            <input type="url" class="form-control input-lg" id="website" placeholder="Enter your personal website address, if any" value="{{ website }}">
          </div>
          <div class="form-group">
            <label for="github_username">GitHub username</label>
            <input type="text" class="form-control input-lg" id="github_username" placeholder="Enter your GitHub username" value="{{ github_username }}" value="{{ github_username }}">
          </div>
          <div class="form-group">
            <label for="year">Year</label>
            <select class="form-control input-lg" id="year">
              <option value="">Select academic year</option>
              <option value="2011" selected?="{{ year==2011 }}">2011</option>
              <option value="2012" selected?="{{ year==2012 }}">2012</option>
              <option value="2013" selected?="{{ year==2013 }}">2013</option>
              <option value="2014" selected?="{{ year==2014 }}">2014</option>
            </select>
          </div>
          <button type="submit" class="btn btn-lg btn-default">Submit</button>
        </form>
      </div>
    </template>
  </template>
  <script src="../bower_components/superagent/superagent.js"></script>
  <script>
    var qs = function (key) {  
      return unescape(window.location.search.replace(new RegExp("^(?:.*[&\\?]" + escape(key).replace(/[\.\+\*]/g, "\\$&") + "(?:\\=([^&]*))?)?.*$", "i"), "$1"));  
    }; 

    Polymer('polymer-form', {
      ready: function () {
        
        var id = +qs('id');
        var request = superagent;
        var self = this;
        var endpoint = '/alumni/';
        if (id) {
          endpoint += id
        }

        request.get('/alumni/' + id, function (res) {
          self.alumnus = res.body;
        });

      }
    });
  </script>
</polymer-element>