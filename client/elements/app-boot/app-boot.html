<link rel="import" href="../page-404/page-404.html">
<link rel="import" href="../page-about/page-about.html">
<link rel="import" href="../page-courses/page-courses.html">
<link rel="import" href="../page-home/page-home.html">
<link rel="import" href="../page-membership/page-membership.html">
<link rel="import" href="../page-people/page-people.html">
<link rel="import" href="../page-projects/page-projects.html">
<link rel="import" href="../page-theses/page-theses.html">

<template is="app-boot">
  <style>
    :host {
      display: block;
    }
  </style>

  <div ref="container"></div>

</template>

<script src="page.js"></script>
<script>
  Pantarei({

    is: 'app-boot',

    routes: {
      '/404': 'page-404',
      '/about': 'page-about',
      '/courses': 'page-courses',
      '/home': 'page-home',
      '/membership': 'page-membership',
      '/privacy': 'page-privacy',
      '/people': 'page-people',
      '/projects': 'page-projects',
      '/theses': 'page-theses',
      '*': 'page-home'
    },

    after_create: function () {
      this.init_routes()
    },

    init_routes: function () {
      let routes = this.routes
      for (let route in routes) {
        let page_name = routes[route]
        page(route, function (context) {
          this.open_page(page_name)
        }.bind(this))
      }
      page()
    },

    open_page: function (page_name) {
      let container = this.refs.container
      while (container.firstChild) {
        container.firstChild.remove()
      }
      let page = document.createElement(page_name)
      container.appendChild(page)
    }

  })
</script>
