<template-element id="part-header">
  <template>
    <style>
      :host {
        display: block;
      }

      .header {
        position: fixed;
        z-index: 100;
        box-sizing: border-box;
        width: 100%;
        height: 60px;
        padding: 0 3%;
        display: flex;
        flex-direction: row;
        align-items: stretch;
        border-bottom-width: 1px;
        border-bottom-style: solid;
        border-bottom-color: rgba(255, 255, 255, 0.2);
        background-color: white;
        transition-property: background-color;
        transition-duration: 0.5s;
      }
      .header.transparent {
        background-color: rgba(49, 51, 59, 0.1);
      }

      .header .brand {
        display: flex;
        align-items: stretch;
        @apply --my-mixin;
      }

      .header .space {
        flex: 1;
      }

      .header .links {
        display: flex;
        flex-direction: row;
        align-items: stretch;
        flex-wrap: nowrap;
      }

      .header .brand .link,
      .header .links .link {
        display: flex;
        align-items: center;
        font-size: 12px;
        font-weight: 800;
        letter-spacing: .75px;
        text-decoration: none;
        text-transform: uppercase;
        padding: 0 20px;
        color: #333;
        transition-property: color;
        transition-duration: .5s;
      }
      .header.transparent .brand .link,
      .header.transparent .links .link {
        color: white;
      }

      .header .brand .link,
      .header .links .link:first-child {
        padding-left: 0;
      }
      .header .brand .link,
      .header .links .link:last-child {
        padding-right: 0;
      }
    </style>

    <div ref="header" class="header">
      <div class="brand">
        <a class="link" href="/">
          <span class="brand">CVDLAB</span>
        </a>
      </div>
      <div class="space"></div>
      <div class="links">
        <a class="link" href="/about">
          <span class="label">about</span>
        </a>
        <a class="link" href="/people">
          <span class="label">people</span>
        </a>
        <a class="link" href="/projects">
          <span class="label">projects</span>
        </a>
        <a class="link" href="/theses">
          <span class="label">theses</span>
        </a>
        <a class="link" href="/courses">
          <span class="label">courses</span>
        </a>
      </div>
    </div>

  </template>
</template-element>

<script>
  class PartHeader extends Pantarei.Element {

    static get is() { return 'part-header' }

    should_update () {
      return false
    }

    after_create () {
      this.on_scroll = this.on_scroll.bind(this)
    }

    after_connect () {
      window.addEventListener('scroll', this.on_scroll)
      this.on_scroll()
    }

    after_disconnect () {
      window.removeEventListener('scroll', this.on_scroll)
    }

    on_scroll (event) {
      let transparent = window.scrollY < 45
      this.refs.header.classList.toggle('transparent', transparent)
    }

  }

  document.registerElement('part-header', PartHeader)
</script>
